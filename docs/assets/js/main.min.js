const nameInput=document.querySelector("#firstName"),lastNameInput=document.querySelector("#lastName"),nationality=document.querySelector("#nationality"),userEmail=document.querySelector("#email"),userDate=document.querySelector(".date"),userMonth=document.querySelector(".month"),userYear=document.querySelector(".year"),userGender=document.querySelector("#male"),userPassword=document.querySelector("#password"),userConfirmPassword=document.querySelector("#confirmPassword"),submitBtn=document.querySelector(".container__main__form__submitBtn"),form=document.querySelector(".container__main__form"),title=document.querySelector(".container__main__title"),titleMessage=document.querySelector(".container__main__description"),modal=document.querySelector(".container__modalWrapper"),modalMessage=document.querySelector(".container__modalWrapper__modal__message"),closeModalBtn=document.querySelector(".container__modalWrapper__modal__closeBtn"),checkEmail=()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(userEmail.value)?checkPassword():(modalMessage.innerText="Введите правильную почту!",userEmail.style.borderColor="#FF2828",userEmail.style.color="#FF2222",userEmail.style.borderWidth="2px",userEmail.value="",!1),checkPassword=()=>{if(!(userPassword.value.length<8)&&/[A-Z]/.test(userPassword.value)&&/[a-z]/.test(userPassword.value)&&/\d/.test(userPassword.value))return!0;modalMessage.innerText="Пароль пользователя должен содержать от 8 символов, заглавные и строчные буквы, а также цифры!",openModal(),userPassword.style.borderColor="#FF2828",userPassword.style.color="#FF2222",userPassword.style.borderWidth="2px",userPassword.value="",userConfirmPassword.value=""},validationForm=()=>{var e;""===nameInput.value.trim()||""===lastNameInput.value.trim()||""===userEmail.value.trim()||""===userPassword.value.trim()||""===userConfirmPassword.value.trim()?(modalMessage.innerText="Заполните все поля!",openModal()):checkEmail()?(e={id:Date.now(),name:nameInput.value,lastName:lastNameInput.value,nationality:nationality.value,birthday:{date:userDate.value,month:userMonth.value,year:userYear.value},gender:userGender.value,userPassword:userPassword.value},SubmitNewUser(e)):openModal()},openModal=()=>{modal.classList.remove("hiddenModal")},closeModal=()=>{modalMessage.innerText="",modal.classList.add("hiddenModal")},SubmitNewUser=(closeModalBtn.addEventListener("click",closeModal),async e=>{(await fetch("http://localhost:3004/users",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})).status<400?(form.style.display="none",title.style.marginLeft="43.8px",title.style.marginTop="176.5px",titleMessage.style.marginLeft="43.8px",title.innerText="Thank You!",titleMessage.innerText="you registered!"):(form.style.display="none",title.style.marginLeft="43.8px",title.style.marginTop="176.5px",titleMessage.style.marginLeft="43.8px",title.innerText="Error",titleMessage.innerText="Try again!")});userEmail.addEventListener("focus",()=>{userEmail.style.borderColor="#F2F2F2",userEmail.style.color="#111",userEmail.style.borderWidth="1px"}),userPassword.addEventListener("focus",()=>{userEmail.style.borderColor="#F2F2F2",userEmail.style.color="#111",userEmail.style.borderWidth="1px"}),userConfirmPassword.addEventListener("focus",()=>{userConfirmPassword.style.borderColor="#F2F2F2",userConfirmPassword.style.color="#111",userConfirmPassword.style.borderWidth="1px"}),submitBtn.addEventListener("click",e=>{e.preventDefault(),userPassword.style.borderColor="#F2F2F2",userPassword.style.color="#111",userPassword.style.borderWidth="1px",userPassword.value===userConfirmPassword.value?validationForm():(modalMessage.innerText="Неправильное подтверждение пароля",openModal(),userConfirmPassword.style.borderColor="#FF2828",userConfirmPassword.style.color="#FF2222",userConfirmPassword.style.borderWidth="2px",userConfirmPassword.value="")});